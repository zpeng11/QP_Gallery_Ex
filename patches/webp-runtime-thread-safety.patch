--- decoded/smali/com/alensw/b/h/t.smali
+++ decoded/smali/com/alensw/b/h/t.smali
@@ -270,7 +270,7 @@
 
 # virtual methods
 .method protected a()V
-    .locals 4
+    .locals 5
 
     iget-object v0, p0, Lcom/alensw/b/h/t;->k:Landroid/graphics/Bitmap;
 
@@ -297,6 +297,25 @@
 
     invoke-virtual {p0, v0}, Lcom/alensw/b/h/t;->a(Z)V
 
+    iget-object v1, p0, Lcom/alensw/b/h/t;->t:Ljava/lang/Thread;
+
+    if-eqz v1, :cond_thread_idle
+
+    invoke-virtual {v1}, Ljava/lang/Thread;->isAlive()Z
+
+    move-result v1
+
+    if-eqz v1, :cond_thread_idle
+
+    const-string v1, "WebpRuntime"
+
+    const-string v2, "skip release while decode thread alive"
+
+    invoke-static {v1, v2}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I
+
+    goto :goto_0
+
+    :cond_thread_idle
     iget-object v0, p0, Lcom/alensw/b/h/t;->j:Lcom/aureusapps/android/webpandroid/decoder/WebPDecoder;
 
     if-eqz v0, :cond_release_done
@@ -329,8 +348,6 @@
 
     iput-object v0, p0, Lcom/alensw/b/h/t;->r:Landroid/graphics/Bitmap;
 
-    iput-object v0, p0, Lcom/alensw/b/h/t;->t:Ljava/lang/Thread;
-
     const/4 v1, 0x0
 
     iput-boolean v1, p0, Lcom/alensw/b/h/t;->u:Z
@@ -377,7 +394,7 @@
 .end method
 
 .method public a(Z)V
-    .locals 4
+    .locals 6
 
     const/4 v0, 0x0
 
@@ -398,20 +415,56 @@
 
     iget-object v1, p0, Lcom/alensw/b/h/t;->t:Ljava/lang/Thread;
 
-    if-eqz v1, :cond_1
+    if-eqz v1, :cond_2
 
     invoke-virtual {v1}, Ljava/lang/Thread;->interrupt()V
 
+    const-wide/16 v2, 0x190
+
+    :try_start_0
+    invoke-virtual {v1, v2, v3}, Ljava/lang/Thread;->join(J)V
+    :try_end_0
+    .catch Ljava/lang/Throwable; {:try_start_0 .. :try_end_0} :catch_0
+
+    :goto_0
+    invoke-virtual {v1}, Ljava/lang/Thread;->isAlive()Z
+
+    move-result v2
+
+    if-nez v2, :cond_1
+
     iput-object v0, p0, Lcom/alensw/b/h/t;->t:Ljava/lang/Thread;
 
+    goto :cond_2
+
     :cond_1
+    const-string v2, "WebpRuntime"
+
+    const-string v3, "decode thread still alive on stop"
+
+    invoke-static {v2, v3}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I
+
+    goto :cond_2
+
+    :catch_0
+    move-exception v2
+
+    const-string v3, "WebpRuntime"
+
+    const-string v4, "join decode thread: "
+
+    invoke-static {v3, v4, v2}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
+
+    goto :goto_0
+
+    :cond_2
     iget-object v1, p0, Lcom/alensw/b/h/t;->q:Ljava/lang/Object;
 
-    if-eqz v1, :cond_4
+    if-eqz v1, :cond_5
 
     monitor-enter v1
 
-    :try_start_0
+    :try_start_1
     iget-object v2, p0, Lcom/alensw/b/h/t;->r:Landroid/graphics/Bitmap;
 
     iput-object v0, p0, Lcom/alensw/b/h/t;->r:Landroid/graphics/Bitmap;
@@ -422,33 +475,33 @@
 
     monitor-exit v1
 
-    goto :goto_0
+    goto :goto_1
 
     :catchall_0
     move-exception v0
 
     monitor-exit v1
-    :try_end_0
-    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+    :try_end_1
+    .catchall {:try_start_1 .. :try_end_1} :catchall_0
 
     throw v0
 
-    :goto_0
-    if-eqz v2, :cond_4
+    :goto_1
+    if-eqz v2, :cond_5
 
     iget-object v1, p0, Lcom/alensw/b/h/t;->k:Landroid/graphics/Bitmap;
 
-    if-eq v2, v1, :cond_4
+    if-eq v2, v1, :cond_5
 
     invoke-virtual {v2}, Landroid/graphics/Bitmap;->isRecycled()Z
 
     move-result v1
 
-    if-nez v1, :cond_4
+    if-nez v1, :cond_5
 
     invoke-virtual {v2}, Landroid/graphics/Bitmap;->recycle()V
 
-    :cond_4
+    :cond_5
     return-void
 .end method
 
@@ -646,17 +699,16 @@
 .method public w()V
     .locals 14
 
-    iget-object v1, p0, Lcom/alensw/b/h/t;->j:Lcom/aureusapps/android/webpandroid/decoder/WebPDecoder;
+    invoke-virtual {p0}, Lcom/alensw/b/h/t;->s()Z
 
-    if-eqz v1, :cond_return
+    move-result v0
 
-    iget-boolean v2, p0, Lcom/alensw/b/h/t;->p:Z
+    if-eqz v0, :cond_return
 
-    if-nez v2, :cond_0
+    iget-object v1, p0, Lcom/alensw/b/h/t;->j:Lcom/aureusapps/android/webpandroid/decoder/WebPDecoder;
 
-    goto :goto_2
+    if-eqz v1, :cond_return
 
-    :cond_0
     invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J
 
     move-result-wide v8
@@ -834,6 +886,35 @@
 
     return v0
 .end method
+
+.method public s()Z
+    .locals 2
+
+    iget-boolean v0, p0, Lcom/alensw/b/h/t;->p:Z
+
+    if-eqz v0, :cond_0
+
+    invoke-static {}, Ljava/lang/Thread;->currentThread()Ljava/lang/Thread;
+
+    move-result-object v0
+
+    iget-object v1, p0, Lcom/alensw/b/h/t;->t:Ljava/lang/Thread;
+
+    if-ne v0, v1, :cond_0
+
+    iget-object v0, p0, Lcom/alensw/b/h/t;->j:Lcom/aureusapps/android/webpandroid/decoder/WebPDecoder;
+
+    if-eqz v0, :cond_0
+
+    const/4 v0, 0x1
+
+    return v0
+
+    :cond_0
+    const/4 v0, 0x0
+
+    return v0
+.end method
 
 .method public r()Landroid/view/View;
     .locals 1
--- decoded/smali/com/alensw/b/h/v.smali
+++ decoded/smali/com/alensw/b/h/v.smali
@@ -28,7 +28,7 @@
     :goto_0
     iget-object v0, p0, Lcom/alensw/b/h/v;->a:Lcom/alensw/b/h/t;
 
-    invoke-virtual {v0}, Lcom/alensw/b/h/t;->q()Z
+    invoke-virtual {v0}, Lcom/alensw/b/h/t;->s()Z
 
     move-result v0
 
